<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Pick → YouTube再生（埋め込めない動画は自動で外部）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{margin:0;background:#111;color:#fff;font-family:system-ui;display:flex;min-height:100vh;align-items:center;justify-content:center}
    .app{width:640px;max-width:95vw;padding:16px}
    .bar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:10px}
    select,button{background:#1a1a1a;color:#fff;border:1px solid #333;border-radius:10px;padding:8px 12px}
    button.primary{background:#ffd54a;color:#111;border-color:#cc9}
    .stage{width:640px;max-width:95vw;height:360px;background:#000;border:1px solid #222;border-radius:12px;overflow:hidden;margin-top:8px}
    iframe{width:100%;height:100%;border:0;display:block}
    .hint{font-size:12px;color:#bbb;margin-top:8px}
  </style>
</head>
<body>
  <div class="app">
    <div class="bar">
      <label>Pick
        <select id="pick"></select>
      </label>
      <button id="play" class="primary">▶ 再生</button>
      <button id="open">↗ YouTubeで開く</button>
      <button id="stop">⏹ 停止</button>
    </div>

    <div class="stage"><iframe id="player" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen></iframe></div>
    <div class="hint" id="hint">埋め込めない動画は自動で「YouTubeで開く」に切り替えます。</div>
  </div>

  <script>
    // 9件（A2は埋め込み不可。C1を追加済み）
    const items = [
      { label: 'A1 — ワインレッドの心',                   url: 'https://youtu.be/jNvYRdQfoWA?si=1J6wfP9aRnkTYBZd', embed: true },
      { label: 'A2 — 地上の星（中島みゆき）',             url: 'https://youtube.com/watch?v=v2SlpjCz7uE&si=O5yHebIxmJL-Vo1a', embed: false }, // 埋め込み不可
      { label: 'A3 — 地上の星（AI演歌歌手）',             url: 'https://youtube.com/watch?v=KIuvkjfcqnE&si=BKesE4SY0s9kv6jo', embed: true },
      { label: 'A4 — 聖母たちのララバイ（AIカバー）',     url: 'https://youtube.com/watch?v=iSj7rw9AmZ8&si=gwc7ISjCMRH6oG49', embed: true },
      { label: 'B1 — 雨の御堂筋（AI演歌歌手）',           url: 'https://youtube.com/watch?v=eUtoo78SkfU&si=fuJfl2yXadB3eAX6', embed: true },
      { label: 'B2 — 2025年最新！YouTubeの始め方',        url: 'https://youtube.com/watch?v=8oIMKcGPgB0&si=PQb2NMa_2cVGm0LM', embed: true },
      { label: 'B3 — YouTube 再生リストの作り方！',       url: 'https://youtube.com/watch?v=aNthLKKMDk4&si=-ZsamA27uESVUTcE', embed: true },
      { label: 'B4 — PDFで共有する方法（URLを変えるだけ）', url: 'https://youtube.com/watch?v=LaXVm2D7QJU&si=FferWVSd60Qb2MoQ', embed: true },
      { label: 'C1 — 人生いろいろ（雷音こずえ）',         url: 'https://youtube.com/watch?v=GBwvY764lWg&si=4j73Ab9lZ0ZgBxy7', embed: true }
    ];

    function toEmbedURL(youtubeUrl){
      try{
        const u = new URL(youtubeUrl.trim());
        const host = u.hostname.replace(/^www\\./,'');
        if (host === 'youtu.be'){
          const id = u.pathname.split('/').filter(Boolean)[0];
          if (id) return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&playsinline=1&modestbranding=1`;
        }
        if (host.endsWith('youtube.com')){
          if (u.pathname === '/watch'){
            const id = u.searchParams.get('v');
            if (id) return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&playsinline=1&modestbranding=1`;
          }
          if (u.pathname.startsWith('/shorts/')){
            const id = u.pathname.split('/')[2];
            if (id) return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&playsinline=1&modestbranding=1`;
          }
        }
      }catch(e){}
      return youtubeUrl;
    }

    const pick = document.getElementById('pick');
    const player = document.getElementById('player');
    const btnPlay = document.getElementById('play');
    const btnOpen = document.getElementById('open');
    const btnStop = document.getElementById('stop');
    const hint = document.getElementById('hint');

    // セレクト生成
    items.forEach((it,i)=>{
      const opt=document.createElement('option');
      opt.value=i; opt.textContent = it.label + (it.embed?'':' 🔗');
      pick.appendChild(opt);
    });
    pick.value = 0;

    function playSelected(){
      const it = items[Number(pick.value)];
      if(!it.embed){
        window.open(it.url, '_blank');
        hint.textContent = 'この動画は埋め込み不可のため、YouTubeで再生しました。';
        return;
      }
      player.src = toEmbedURL(it.url);
      hint.textContent = '埋め込み再生中';
    }
    function openSelected(){
      const it = items[Number(pick.value)];
      window.open(it.url, '_blank');
    }
    function stopPlayer(){
      player.src = '';
      hint.textContent = '停止';
    }

    btnPlay.onclick = playSelected;
    btnOpen.onclick = openSelected;
    btnStop.onclick = stopPlayer;
  </script>
</body>
</html>