<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>お気に入り（縮小版）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#111; --fg:#fff; --muted:#aaa; --accent:#ffd54a; }
    *{ box-sizing:border-box }
    body{
      margin:0; background:var(--bg); color:var(--fg); font-family:system-ui, -apple-system, "Noto Sans JP", Meiryo, sans-serif;
      display:flex; min-height:100vh; align-items:center; justify-content:center; padding:12px;
    }
    .app{ width:min(720px, 96vw); }
    h1{ font-size:18px; margin:0 0 10px; }
    .bar{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin:10px 0 8px; }
    select, button{
      background:#1a1a1a; color:var(--fg); border:1px solid #333; border-radius:10px; padding:8px 12px; font-size:14px;
    }
    button.primary{ background:var(--accent); color:#222; border-color:#cc9 }
    .stage{ position:relative; width:100%; aspect-ratio:16/9; background:#000; border:1px solid #222; border-radius:12px; overflow:hidden; }
    iframe{ width:100%; height:100%; display:block; border:0 }
    .hint{ color:var(--muted); font-size:12px; margin-top:8px }
    .list{ display:grid; grid-template-columns:1fr 1fr; gap:6px; margin-top:10px }
    .item-btn{ background:#1a1a1a; border:1px solid #333; border-radius:10px; padding:8px 10px; text-align:left; cursor:pointer }
    .item-btn small{ color:var(--muted) }
  </style>
</head>
<body>
  <div class="app">
    <h1>お気に入り（縮小版）</h1>

    <!-- シンプル操作列：セレクトで選んで再生 or 外部で開く -->
    <div class="bar">
      <label>Pick
        <select id="pick"></select>
      </label>
      <button id="play" class="primary">▶ 埋め込み再生</button>
      <button id="open">↗ 外部で開く</button>
      <button id="stop">⏹ 停止</button>
    </div>

    <!-- ステージ（埋め込み表示） -->
    <div class="stage">
      <iframe id="frame" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen></iframe>
    </div>
    <div class="hint" id="hint">※埋め込み不可のページ/動画は「外部で開く」を使ってください。</div>

    <!-- お気に入りの“押しやすいボタン”一覧（お好みで増減OK） -->
    <div class="list" id="quick"></div>
  </div>

  <script>
    // お気に入り（最初は親ページと同じ代表例＋C1ページに合う項目）
    // ここに追加・順番入替でOK
    const items = [
      // Music (埋め込み不可が出たら open を使う)
      { label: 'A1 — ワインレッドの心', url: 'https://youtu.be/jNvYRdQfoWA?si=1J6wfP9aRnkTYBZd', type:'yt' },
      { label: 'A2 — 地上の星（中島みゆき）', url: 'https://youtube.com/watch?v=v2SlpjCz7uE&si=O5yHebIxmJL-Vo1a', type:'yt', embed:false }, // 埋め込み不可
      { label: 'A3 — 地上の星（AI演歌歌手）', url: 'https://youtube.com/watch?v=KIuvkjfcqnE&si=BKesE4SY0s9kv6jo', type:'yt' },
      { label: 'A4 — 聖母たちのララバイ（AIカバー）', url: 'https://youtube.com/watch?v=iSj7rw9AmZ8&si=gwc7ISjCMRH6oG49', type:'yt' },
      { label: 'B1 — 雨の御堂筋（AI演歌歌手）', url: 'https://youtube.com/watch?v=eUtoo78SkfU&si=fuJfl2yXadB3eAX6', type:'yt' },

      // 解説動画
      { label: 'B2 — 2025年最新！YouTubeの始め方', url: 'https://youtube.com/watch?v=8oIMKcGPgB0&si=PQb2NMa_2cVGm0LM', type:'yt' },
      { label: 'B3 — YouTube 再生リストの作り方！', url: 'https://youtube.com/watch?v=aNthLKKMDk4&si=-ZsamA27uESVUTcE', type:'yt' },
      { label: 'B4 — PDFで共有する方法（URLを変えるだけ）', url: 'https://youtube.com/watch?v=LaXVm2D7QJU&si=FferWVSd60Qb2MoQ', type:'yt' },

      // HTML（この縮小版自身からも、別の自作ページへ飛べます）
      // 例：別の自作HTML / 外部に置いた自作ページ
      { label: 'C2 — お気に入り縮小版（外部リンク）', url: 'https://example.com/mini.html', type:'html', embed:false }
    ];

    // YouTube URL → 埋め込みURL
    function toEmbedURL(url){
      try{
        const u = new URL(url);
        const host = u.hostname.replace(/^www\./,'');
        if(!host.includes('youtu')) return url; // HTML等は変換不要
        if(host === 'youtu.be'){
          const id = u.pathname.split('/').filter(Boolean)[0];
          if(id) return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&playsinline=1&modestbranding=1`;
        }
        if(host.endsWith('youtube.com')){
          if(u.pathname === '/watch'){
            const id = u.searchParams.get('v');
            if(id) return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&playsinline=1&modestbranding=1`;
          }
          if(u.pathname.startsWith('/shorts/')){
            const id = u.pathname.split('/')[2];
            if(id) return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&playsinline=1&modestbranding=1`;
          }
        }
      }catch(e){}
      return url;
    }

    // 要素
    const pick  = document.getElementById('pick');
    const frame = document.getElementById('frame');
    const btnPlay = document.getElementById('play');
    const btnOpen = document.getElementById('open');
    const btnStop = document.getElementById('stop');
    const hint = document.getElementById('hint');
    const quick = document.getElementById('quick');

    // セレクト構築
    items.forEach((it, i) => {
      const opt = document.createElement('option');
      opt.value = i;
      opt.textContent = it.label + (it.embed===false ? ' 🔗' : '');
      pick.appendChild(opt);
    });
    pick.value = 0;

    // クイックボタン（2列の小さめボタン）
    items.forEach((it, i) => {
      const btn = document.createElement('button');
      btn.className = 'item-btn';
      btn.innerHTML = `<div>${it.label}</div><small>${it.embed===false?'外部で開く推奨':'埋め込み可（たぶん）'}</small>`;
      btn.onclick = () => { pick.value = i; playSelected(); };
      quick.appendChild(btn);
    });

    function playSelected(){
      const it = items[Number(pick.value)];
      if(it.embed === false){
        window.open(it.url, '_blank');
        hint.textContent = '埋め込み不可：外部で開きました。';
        return;
      }
      const src = (it.type === 'yt') ? toEmbedURL(it.url) : it.url;
      frame.src = src;
      hint.textContent = '埋め込み表示中';
    }
    function openSelected(){
      const it = items[Number(pick.value)];
      window.open(it.url, '_blank');
      hint.textContent = '外部で開きました。';
    }
    function stopFrame(){
      frame.src = '';
      hint.textContent = '停止';
    }

    btnPlay.onclick = playSelected;
    btnOpen.onclick = openSelected;
    btnStop.onclick = stopFrame;
  </script>
</body>
</html>